### 架构

#### 架构演进
- 单独软件（Web Server + Application Server + DB）
- 多个软件独立-->为提高效率多个软件间进行互通-->多个独立软件，通过api进行消息互通
- 多个软件相同、重复的数据，类似的逻辑，数据的一致性问题导致效率问题-->提取中台
- 中台将业务、数据统一进行规划并分配团队维护，其他团队基于中台进行顶层开发
- AI、云的影响-->架构调整

#### 应用Paas

- 单体式	指整个业务就是一个应用系统，存储可能是数据库、文件系统之类的
- 分布式	多系统间通信、交互-->消息框架HSF、消息中间件Notify；数据库分库、分表-->分库分表访问中间件TDDL
- 单元化架构	整个业务系统可以划分为一些业务单元，实现跨地域、且可支持复杂同步条件的数据同步组件
- 混合云架构	



#### 方案



##### 第三方服务稳定性

**可能存在的问题**

- 公网抖动，第三方服务不稳定，影响自身服务；

- 一个接口超时，占住工作线程，影响其他接口；

**降低影响的优化方案有**

- 增大工作线程数；

- 降低超时时间；

-  服务垂直拆分: N个接口拆分成若干个服务，使得在出问题时，被牵连的接口尽可能少；

**结合业务实施方案**

- 业务能接受旧数据：读取本地数据，异步代理定期更新数据；
- 有多个第三方服务提供商：多个第三方互备；
  - 向第三方同步数据：本地写成功就算成功，异步向第三方同步数据；



#### 设计

架构以简单为美，但这种简单的是以对未来的复杂度的良好容忍为前提的

- 优先实现核心诉求，优化可以放低优先级，后续再进行
    
    > git 的存储系统，实现object控制是关键，增量存储等属于优化
- 实现时使用了特定方式进行处理，这只是处理方式，可以换其他的方式，不是重点
    
    > git 使用sha1来计算hash,hash才是本质,sha1只是其中一种实现方式