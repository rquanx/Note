#### why

85%的缺陷都在码设计阶段产生，而发现bug的阶段越靠后，耗费成本就越高，指数级别的增高





保持unit test代码的稳定，主要靠好的API设计。

> API切实正确切割了需求，那么在重构的时候API就基本不用变化，unit test也不用重写。



重构的时候，只要unit test覆盖的够好，可以节省大量的时间。



#### 分类

- 小型测试：针对单个函数的测试，关注其内部逻辑，mock所有需要的服务。

> 小型测试带来优秀的代码质量、良好的异常处理、

优雅的错误报告

- 中型测试：验证两个或多个制定的模块应用之间的交互

- 大型测试：也被称为“系统测试”或“端到端测试”。大型测试在一个较高层次上运行，验证系统作为一个整体是如何工作的。





#### effect

\- bug类指标（间接指标）：连续迭代的bug总数趋势、迭代内新建bug的趋势、千行bug率

\- 单测的需求覆盖度（50%以上），参与人员覆盖度（80%以上）单测case总数趋势，代码行增量趋势

\- 增量代码的行覆盖率（接入层80%，客户端30%）

\- 单函数圈复杂度（低于40），单函数代码行数（低于80），扫描告警数



#### how

参考pnpjs